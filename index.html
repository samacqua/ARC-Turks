<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ARC labeling interface</title>

  <!-- Just to silence warning about not having icon -->
  <link rel="shortcut icon" href="#" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">

  <!-- JS Libraries -->
  <!-- jQuery library -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
 
  <!-- Bootstrap JS (must be listed after jQuery) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <!-- CSS files -->
  <link rel="stylesheet" type="text/css" href="css/index.css">
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/grids.css">
  <link rel="stylesheet" type="text/css" href="css/testing_interface.css">

  <!-- JS files -->
  <script src="js/index.js"></script>
  <script src="js/grids.js"></script>
  <script src="js/common.js"></script>
  <script src="js/more_grids.js"></script>

  <!-- Font reference -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />

</head>

<body>

    <h3 class="task_label">You are the Describer</h3>

    <!-- Progress Bar -->
    <div class="progress md-progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5" aria-valuemin="0" aria-valuemax="11"></div>
    </div>

    <div class="progress-meter">
        <div class="meter meter-right" style="width: 54.55%;"><span class="meter-text">All Done!</span></div>
        <div class="meter meter-right" style="width: 36.36%;"><span class="meter-text">Finished Tutorial</span></div>
        <div class="meter meter-right" style="width: 9.09%;"><span class="meter-text">Finished Instructions</span></div>
    </div>

    <!-- Actual Body -->
    <div id="container-fluid">

        <div class="alert alert-success" id="info_display"></div>
        <div class="alert alert-danger" id="error_display"></div>

        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-4" id="io_ex_col">
                <div class="col-header">
                    <h1 class="col-title" id="pattern-header">Pattern</h1>
                    <a href="#" class="help-btn" data-toggle="tooltip" title="Describe the pattern that transforms each grid on the left to the grid on its right.">Help</a>
                </div>
                <div id="task_preview"></div>
            </div>
    
            <div class="col-md-4">
                <div class="col-header">
                    <h1 class="col-title">Description</h1>
                </div>

                <div class="form-group">
                    <label for="what_you_see">What should you expect to see in the input grid?</label>
                    <textarea class="form-control" id="what_you_see" rows="2" placeholder="In the input, you should see..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "In the input, you should see..."</small>
                  </div>
                </br>

                <div class="form-group">
                    <label for="what_you_do">How do you make the output grid?</label>
                    <textarea class="form-control" id="what_you_do" rows="2" placeholder="To make the output, you have to..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "To make the output, you have to..."</small>
                  </div>
                </br>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="grid_size_changes" data-toggle="toggle">
                    <label class="form-check-label" for="defaultCheck1">
                      Grid size changes
                    </label>
                  </div>
                </br>

                <div class="form-group" id="grid_size_form">
                    <label for="grid_size_desc">How does the grid size change?</label>
                    <textarea class="form-control" id="grid_size_desc" rows="1" placeholder="The grid size..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "The grid size..."</small>
                  </div>
                </br>

                <button onclick="submit()" type="button" class="btn btn-primary">Submit Description</button>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>

  <!-- Consent Modal -->
  <div class="modal fade" id="consentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="gen-modal-title">Informed Consent</h3>
            </div>
            <div class="modal-body" id="gen-modal-body">
                <p>In this study, you will describe and interpret descriptions of an abstract pattern that you observe in grids.</p>
                </br>
                <p>By answering the following questions, you are participating in a study performed by cognitive scientists in the MIT Department of Brain and Cognitive Science. If you have questions about this research, please contact Sam Acquaviva at samacqua@mit.edu. Your participation in this research is voluntary. You may decline to answer any or all of the following questions. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured; the researchers who have requested your participation will not receive any personal identifying information about you. By clicking <b>'I AGREE'</b> you indicate your consent to participate in this study.</p>
            </div>
            <div class="modal-footer">
                <!-- from https://stackoverflow.com/a/44391959/5416200 to address an issue I realize wasn't there-->
                <button type="button" class="btn btn-primary" onclick="$('#consentModal').one('hidden.bs.modal', function() { $('#demographic_modal').modal('show'); }).modal('hide');">I AGREE</button>
            </div>
        </div>
    </div>
  </div>

    <!-- Demographic Modal -->
    <div class="modal fade" id="demographic_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Demographics</h3>
                </div>
                <div class="modal-body" id="final-modal-body">
                    <p>Before you begin, please enter your age and gender.</p>

                    <label for="gender_form">What is your gender?</label>
                    <select class="form-control" id="gender_form">
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>

                    <label for="age_form">What is your age?</label>
                    </br>
                    <input type="range" class="custom-range" min="18" max="100" step="1" id="age_form">
                    <label id="age_result"></label>

                    <div class="modal-footer">
                        <button onclick="exit_demographic()" type="button" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Introduction Modal -->
    <div class="modal fade" id="introModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Overview of Your Role</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">

                        <p>In year 3030, robots rule the world. Luckily, we managed to infiltrate the robot's factory, where robots process abstract grids.</p>
                        <p>There are two kinds of robots: <strong>describers</strong> and <strong>builders</strong> . In order to blend into the factory, we must imitate these robots.</p>

                        <p>If you are a <strong>describer</strong>, your job is look at several example patterns, and describe the process that makes the output grid from the input grid.</p>
                        <p>For instance, given the following example patterns:</p>
                        <img class="img-responsive" src="img/pattern_test_ex.png">
                        <p>A describer would write something like: </p>
                        <p id="description"><strong>
                            In the input grid, you should see a few 2x2 squares with one corner missing. Fill in each square's missing corner with dark blue.
                        </strong></p>

                        <hr>

                        <p>Once the description is written, it is given to the builder at the other side of the factory.</p>
                        <p>If you are a <strong>builder</strong>, your job is to follow the description given to you and apply it on a new input grid.</p>
                        <p>For instance, the builder who recieved the earlier example's description would see the same description:</p>
                        <p id="description"><strong>
                            In the input grid, you should see a few 2x2 squares with one corner missing. To make the output, you have to fill in each square's missing corner with dark blue.
                        </strong></p>
                        <p>and a new input grid: </p>
                        <img class="img-responsive" src="img/pattern_test_ex 2.png">

                        <p>The builder would produce the correct output grid based on the description and input grid:</p>
                        <img class="img-responsive" src="img/pattern_test_ans.png">

                        <hr>
                        <p>The describer and builder are (together) successful if the builder can build the right output grid from the describer's description.</p>
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="$('#introModal').one('hidden.bs.modal', function() { $('#examples_modal').modal('show'); }).modal('hide'); START_TIME = new Date()">Continue to Examples</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Examples -->
    <div class="modal fade" id="examples_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Solving Patterns</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        Watch this short video to understand the layout of the <strong>describer</strong> and <strong>builder</strong>.

                        <video id="examples_video" width="320" height="240" controls>
                            <source src="img/Instructions.mp4" type="video/mp4" autoplay>
                        </video>

                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="$('#examples_modal').one('hidden.bs.modal', function() { $('#quiz_modal').modal('show'); }).modal('hide');">Okay!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Test Modal -->
    <div class="modal fade" id="quiz_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Testing Understanding</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        <p>Answer these questions to ensure that you understand the instructions.</p>

                        <div id="quiz"></div>
                        <div id="results"></div>

                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="check_quiz()">Submit Quiz</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Instructions Modal -->
    <div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Practice</h3>
                </div>
                <div class="modal-body" id="gen-modal-body">
                    <p>Great job! You successfully completed the quiz.</p>
                    <p>Now, as practice before you go into the robot factory, you practice playing the part of the <strong>describer</strong>. </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="update_progress_bar()" data-dismiss="modal">Okay!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Finished -->
    <div class="modal fade" id="done_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Finished Solving Tasks</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        <p>Great job! Now you know how to describe these patterns. Now, we will practice using descriptions to create the correct output</p>

                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="location.href='self_play_desc.html';">Continue</button>
                </div>
            </div>
        </div>
    </div>

</html>