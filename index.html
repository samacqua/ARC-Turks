<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ARC labeling interface</title>

  <!-- Just to silence warning about not having icon -->
  <link rel="shortcut icon" href="#" />

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">

  <!-- JS Libraries -->
  <!-- jQuery library -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
 
  <!-- Bootstrap JS (must be listed after jQuery) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <!-- CSS files -->
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/grids.css">
  <link rel="stylesheet" type="text/css" href="css/testing_interface.css">

  <!-- JS files -->
  <script src="js/index.js"></script>
  <script src="js/grids.js"></script>
  <script src="js/common.js"></script>
  <script src="js/more_grids.js"></script>

  <!-- Font reference -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />

</head>

<body>

    <div class="alert alert-success" id="info_display"></div>
    <div class="alert alert-danger" id="error_display"></div>

    <div id="container-fluid">
        <div class="row">
            <div class="col-md-2"></div>
            <div class="col-md-4" id="io_ex_col">
                <div class="col-header">
                    <h1 class="col-title" id="pattern-header">Pattern</h1>
                    <a href="#" class="help-btn" data-toggle="tooltip" title="Describe the pattern that transforms each grid on the left to the grid on its right.">Help</a>
                </div>
                <div id="task_preview"></div>
            </div>
    
            <div class="col-md-4">
                <div class="col-header">
                    <h1 class="col-title">Description</h1>
                </div>

                <div class="form-group">
                    <label for="what_you_see">What should you expect to see in the input grid?</label>
                    <textarea class="form-control" id="what_you_see" rows="2" placeholder="You should see..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "You should see..."</small>
                  </div>
                </br>

                <div class="form-group">
                    <label for="what_you_do">How do you make the output grid?</label>
                    <textarea class="form-control" id="what_you_do" rows="2" placeholder="You have to..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "You have to..."</small>
                  </div>
                </br>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="grid_size_changes" data-toggle="toggle">
                    <label class="form-check-label" for="defaultCheck1">
                      Grid size changes
                    </label>
                  </div>
                </br>

                <div class="form-group" id="grid_size_form">
                    <label for="grid_size_desc">How does the grid size change?</label>
                    <textarea class="form-control" id="grid_size_desc" rows="1" placeholder="The grid size..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "The grid size..."</small>
                  </div>
                </br>

                <button onclick="submit()" type="button" class="btn btn-primary">Submit Description</button>
            </div>
            <div class="col-md-2"></div>
        </div>
    </div>

  <!-- Consent Modal -->
  <div class="modal fade" id="consentModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="gen-modal-title">Informed Consent</h3>
            </div>
            <div class="modal-body" id="gen-modal-body">
                <p>In this study, you will describe and interpret descriptions of an abstract pattern that you observe in grids.</p>
                </br>
                <p>By answering the following questions, you are participating in a study performed by cognitive scientists in the MIT Department of Brain and Cognitive Science. If you have questions about this research, please contact Sam Acquaviva at samacqua@mit.edu. Your participation in this research is voluntary. You may decline to answer any or all of the following questions. You may decline further participation, at any time, without adverse consequences. Your anonymity is assured; the researchers who have requested your participation will not receive any personal identifying information about you. By clicking <b>'I AGREE'</b> you indicate your consent to participate in this study.</p>
            </div>
            <div class="modal-footer">
                <!-- from https://stackoverflow.com/a/44391959/5416200 to address an issue I realize wasn't there-->
                <button type="button" class="btn btn-primary" onclick="$('#consentModal').one('hidden.bs.modal', function() { $('#demographic_modal').modal('show'); }).modal('hide');">I AGREE</button>
            </div>
        </div>
    </div>
  </div>

    <!-- Demographic Modal -->
    <div class="modal fade" id="demographic_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Demographics</h3>
                </div>
                <div class="modal-body" id="final-modal-body">
                    <p>Before you begin, please enter your age and gender.</p>

                    <label for="gender_form">What is your gender?</label>
                    <select class="form-control" id="gender_form">
                        <option>Male</option>
                        <option>Female</option>
                        <option>Other</option>
                    </select>

                    <label for="age_form">What is your age?</label>
                    </br>
                    <input type="range" class="custom-range" min="18" max="100" step="1" id="age_form">
                    <label id="age_result"></label>

                    <div class="modal-footer">
                        <button onclick="exit_demographic()" type="button" class="btn btn-primary">Submit</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Introduction Modal -->
    <div class="modal fade" id="introModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Solving Patterns</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        <h4>Overview</h4>
                        <p>If I gave you this problem:
                            <br><br>
                            <strong>7 --> 14</br>3 --> 6</br>5 --> ? </strong>
                            </br></br>
                            You would determine that the answer is <strong>10</strong> because you recognized the pattern: multiply the input number by 2 to get the output number.
                        </p>

                        <p>Similarly, if I told you the pattern was to multiply the input number by 2 and gave you this problem:
                            <br><br>
                            <strong>12 --> ?</strong>
                            </br></br>
                            You would determine the answer is 24 because you could apply my description to the test input (12).
                        </p>

                        <p>However, describing patterns can be more difficult. For example, if the pattern involved grids instead of numbers, it would be more difficult. Here is an example: </p>
                        <img class="img-responsive" src="img/pattern_test_ex.png">

                        <p>Okay, this is more difficult to solve, but after a bit of thinking, you might see the pattern. Is this the output you were expecting?:</p>
                        <img class="img-responsive" src="img/pattern_test_ans.png">

                        <p>You can solve this problem, but what if I <i>described</i> the pattern instead of showing you examples, and then gave you the last grid? Here is the same problem with that format:</p>

                        </br>
                        <p><strong>In the input grid, you should see a few 2x2 squares with one corner missing. Fill in each square's missing corner with dark blue.</strong></p>
                        <img class="img-responsive" src="img/pattern_test_ex 2.png">
                        </br>

                        <p>This second formulation was likely more difficult. And that is what this study is about. You will write these descriptions given only the examples (not the final test grid) for someone else to solve. Likewise, you will use descriptions that other people have made to solve the pattern.</p>
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="$('#introModal').one('hidden.bs.modal', function() { $('#examples_modal').modal('show'); }).modal('hide'); START_TIME = new Date()">Continue to Examples</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Examples -->
    <div class="modal fade" id="examples_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Solving Patterns</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        Watch this video to see a few examples of the layout and the task.

                        <video id="examples_video" width="320" height="240" controls>
                            <source src="img/desc_examples.mp4" type="video/mp4" autoplay>
                        </video>

                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="exit_examples_modal()">Okay!</button>
                </div>
            </div>
        </div>
    </div>

        <!-- Instructions Modal -->
    <div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Practice</h3>
                </div>
                <div class="modal-body" id="gen-modal-body">
                    <p>Now, as practice, you will describe a pattern. Make sure to include enough detail in the description so that, given a new input grid, you can create the correct output.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Okay!</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Finished -->
    <div class="modal fade" id="done_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Finished Solving Tasks</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
    
                        <p>Great job! Now you know how to describe these patterns. Now, we will practice using descriptions to create the correct output</p>

                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" onclick="location.href='self_play_desc.html';">Continue</button>
                </div>
            </div>
        </div>
    </div>

</html>