<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ARC labeling interface</title>

  <!-- Just to silence warning about not having icon -->
  <link rel="shortcut icon" href="#" />

  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-firestore.js"></script>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-table/1.10.1/bootstrap-table.min.css">

  <!-- JS Libraries -->
  <!-- jQuery library -->
  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
 
  <!-- Bootstrap JS (must be listed after jQuery) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  <!-- CSS files -->
  <link rel="stylesheet" type="text/css" href="css/common.css">
  <link rel="stylesheet" type="text/css" href="css/speaker.css">
  <link rel="stylesheet" type="text/css" href="css/grids.css">
  <link rel="stylesheet" type="text/css" href="css/testing_interface.css">

  <!-- JS files -->
  <script src="js/speaker.js"></script>
  <script src="js/common.js"></script>
  <script src="js/grids.js"></script>
  <script src="js/more_grids.js"></script>
  <script src="js/fire.js"></script>

  <!-- Font reference -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap" rel="stylesheet" />

</head>

<body>
    <div id="container-fluid">

        <div class="alert alert-success" id="info_display"></div>
        <div class="alert alert-danger" id="error_display"></div>

        <div class="row">
            <div class="col-md-4" id="io_ex_col">
                <div class="col-header">
                    <h1>Input-Output Pairs</h1>
                </div>

                <div id="task_preview"></div>
            </div>
    
            <div class="col-md-4">
                <div class="col-header">
                    <h1>Description</h1>
                </div>

                <div class="form-group">
                    <label for="what_you_see">What should you expect to see in the input grid?</label>
                    <textarea class="form-control" id="what_you_see" rows="2" placeholder="You should see..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "You should see..."</small>
                  </div>
                </br>

                <div class="form-group">
                    <label for="what_you_do">What do you change about the input grid?</label>
                    <textarea class="form-control" id="what_you_do" rows="2" placeholder="You have to..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "You have to..."</small>
                  </div>
                </br>

                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="" id="grid_size_changes" data-toggle="toggle">
                    <label class="form-check-label" for="defaultCheck1">
                      Grid size changes
                    </label>
                  </div>
                </br>

                <div class="form-group" id="grid_size_form">
                    <label for="grid_size_desc">How does the grid size change?</label>
                    <textarea class="form-control" id="grid_size_desc" rows="1" placeholder="The grid size..."></textarea>
                    <small id="emailHelp" class="form-text text-muted">Start with "The grid size..."</small>
                  </div>
                </br>

                <button onclick="continue_to_verify()" type="button" class="btn btn-primary">Submit Description and Continue to Verification</button>
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#giveUpModal">Give up</button>
            </div>
    
            <div class="col-md-4" id="validation-col">

                <div class="col-header">
                    <h1>Validation</h1>
                </div>
                
                <h3>Validation Input</h3>
                <div id="evaluation_input" class="selectable_grid"></div>

                <hr/>

                <h3>Validation Output</h3>

                <div id="output_grid">
                    <div class="edition_grid selectable_grid">
                        <div class="row">
                            <div class="cell" symbol="0" x="0" y="0"></div>
                            <div class="cell" symbol="0" x="0" y="1"></div>
                            <div class="cell" symbol="0" x="0" y="2"></div>
                        </div>
                        <div class="row">
                            <div class="cell" symbol="0" x="1" y="0"></div>
                            <div class="cell" symbol="0" x="1" y="1"></div>
                            <div class="cell" symbol="0" x="1" y="2"></div>
                        </div>
                        <div class="row">
                            <div class="cell" symbol="0" x="2" y="0"></div>
                            <div class="cell" symbol="0" x="2" y="1"></div>
                            <div class="cell" symbol="0" x="2" y="2"></div>
                        </div>
                    </div>
                </div>

                <div id="resize_control_btns">
                    <label for="output_grid_size">Change grid size: </label>
                    <input type="text" id="output_grid_size" class="grid_size_field" name="size" value="3x3">
                    <button type="button" class="btn btn-primary" onclick="resizeOutputGrid()" id="resize_btn">Resize</button>
                </div>

                <button type="button" class="btn btn-primary" onclick="copyFromInput()">Copy from input</button>
                <button type="button" class="btn btn-primary" onclick="resetOutputGrid()">Reset grid</button>
                <button type="button" class="btn btn-success" onclick="check()">Check!</button>

                <div id="toolbar">
                    <div>
                        <input type="radio" id="tool_edit"
                         name="tool_switching" value="edit" checked>
                        <label for="tool_edit">Draw</label>

                        <input type="radio" id="tool_floodfill"
                         name="tool_switching" value="floodfill">
                        <label for="tool_floodfill">Flood fill</label>

                        <input type="radio" id="tool_select"
                        name="tool_switching" value="select">
                       <label for="tool_select">Copy-Paste</label>
                    </div>
                </div>

                <div id="symbol_picker">
                    <div class="symbol_preview symbol_0 selected-symbol-preview" symbol="0"></div>
                    <div class="symbol_preview symbol_1" symbol="1"></div>
                    <div class="symbol_preview symbol_2" symbol="2"></div>
                    <div class="symbol_preview symbol_3" symbol="3"></div>
                    <div class="symbol_preview symbol_4" symbol="4"></div>
                    <div class="symbol_preview symbol_5" symbol="5"></div>
                    <div class="symbol_preview symbol_6" symbol="6"></div>
                    <div class="symbol_preview symbol_7" symbol="7"></div>
                    <div class="symbol_preview symbol_8" symbol="8"></div>
                    <div class="symbol_preview symbol_9" symbol="9"></div>
                </div>

                </br>
                <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#giveUpModal">Give up</button>
            </div>
        </div>
    </div>
  
    <!-- Instructions Modal -->
    <div class="modal fade" id="instructionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Instructions</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
                        <p>You are now playing the part of describing the pattern. However, these descriptions will be going to another person. So, you have to make sure they are descriptive enough so that they can solve the problem even though <strong>they have never seen the pattern examples that you will see.</strong></p>
                        <p>Because your description is going to another person, we need to make sure you understand the pattern as well. So, after you submit your description, you will be asked to solve the problem.</p>
                        <p>If, after some time, you do not understand the pattern, you can give up and we will give you a new problem to describe.</p>
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Quick Instructions Modal -->
    <div class="modal fade" id="quickInstructionsModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">You are Describing</h3>
                </div>
                    <div class="modal-body" id="gen-modal-body">
                        <p>You are now playing the part of describing the pattern.</p>
                    </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Continue</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Task Qs Modal -->
    <div class="modal fade" id="task_qs_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Exit Survey</h3>
                </div>
                <div class="modal-body" id="final-modal-body">

                    <label for="conf_form">After creating the output based on the new input, how confident are you in your original description, on a scale from 1-10?</label>
                    <input type="range" class="custom-range" min="1" max="10" step="1" id="conf_form">
                    <label id="conf_result"></label>

                    <div class="modal-footer">
                        <button onclick="exit_task_qs()" type="button" class="btn btn-primary" data-dismiss="modal">Finish</button>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>

    <!-- Finished Modal -->
    <div class="modal fade" id="finished_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Thank You!</h3>
                </div>
                <div class="modal-body" id="final-modal-body">
                    <p>Thank you for participating in this study. Your user ID is: </p>
                    <h5 id="finish_modal_uid"></h5>
                </div>
            </div>
        </div>
    </div>

    <!-- Give-up Modal -->
    <div class="modal fade" id="giveUpModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h3 class="modal-title" id="gen-modal-title">Give Up</h3>
                </div>
                <div class="modal-body" id="gen-modal-body">
                    <p>Are you sure that you can't determine the pattern?</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">No, I'll try some more</button>
                    <button onclick="give_up()" type="button" class="btn btn-danger" data-dismiss="modal">Give Up</button>
                </div>
            </div>
        </div>
    </div>

</body>
</html>
